<div
    v-for="(field, fieldKey) in selectedContract.fields"
    class="mb-4 border w-full border-neutral-800 p-1 rounded-md flex-colum gap-x-4"
>
    <div class="flex">
        <div
            class="flex justify-center items-center ml-1"
            v-if="selectedContract.options.moduleContract"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="12" height="12"
                viewBox="0 0 24 24"
                fill="currentColor"
                class="mr-1"
                title="ReadOnly"
            >
                <path fill-rule="evenodd" d="M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z" clip-rule="evenodd"></path>
            </svg>
        </div>

        <select
            title="Type"
            class="p-2 pr-4 mr-2 h-[42px] w-56 outline-none bg-neutral-900 border-none"
            :class="[selectedContract.options.moduleContract ? 'text-neutral-500' : '']"
            :disabled="selectedContract.options.moduleContract"
            v-model="field.protoType"
        >
            <option
                v-for="fieldType in protoTypes"
                :selected="field.protoType === fieldType.key"
                :value="fieldType.key"
            >{{ fieldType.label }}</option>
        </select>

        <div class="items-center flex ml-4 mr-2" title="Array">
            <input
                type="checkbox"
                class="w-3 h-3 mr-2 text-blue-600 bg-neutral-800 dark:bg-gray-700 rounded-sm focus:ring-blue-800 focus:ring-2 rounded-md"
                :disabled="selectedContract.options.moduleContract"
                v-model="field.protoRepeated"
            />
            <svg xmlns="http://www.w3.org/2000/svg" width="18" viewBox="0 0 1792 1792" fill="currentColor"><path stroke-width="0" d="M384 1408q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm0-512q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1408 416v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5zm-1408-928q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1408 416v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5zm0-512v192q0 13-9.5 22.5t-22.5 9.5h-1216q-13 0-22.5-9.5t-9.5-22.5v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5z"></path></svg>
        </div>

        <input
            class="border-l pl-4 h-[42px] w-96 border-neutral-800 focus-none outline-none"
            type="text"
            placeholder="Name"
            title="Name"
            v-model="field.propertyKey"
            :disabled="selectedContract.options.moduleContract"
        />

        <div class="flex justify-end mr-4 items-right h-[42px] w-full text-xs">
            <div class="items-center flex">
                <input
                    type="checkbox"
                    class="w-3 h-3 mr-2 text-blue-600 bg-neutral-800 dark:bg-gray-700 rounded-sm focus:ring-blue-800 focus:ring-2 rounded-md"
                    v-model="field.nullable"
                    title="Nullable"
                    :disabled="selectedContract.options.moduleContract"
                />
                <label>N</label>
            </div>

            <div class="items-center flex ml-4">
                <input
                    type="checkbox"
                    class="w-3 h-3 mr-2 text-blue-600 bg-neutral-800 dark:bg-gray-700 rounded-sm focus:ring-blue-800 focus:ring-2 rounded-md"
                    v-model="field.readOnly"
                    title="Read Only"
                    :disabled="selectedContract.options.moduleContract"
                />
                <label>RO</label>
            </div>

            <div class="items-center flex ml-4">
                <input
                    type="checkbox"
                    class="w-3 h-3 mr-2 text-blue-600 bg-neutral-800 dark:bg-gray-700 rounded-sm focus:ring-blue-800 focus:ring-2 rounded-md"
                    v-model="field.required"
                    title="Required"
                    :disabled="selectedContract.options.moduleContract"
                />
                <label>R</label>
            </div>

            <div class="items-center flex ml-4">
                <input
                    type="checkbox"
                    class="w-3 h-3 mr-2 text-blue-600 bg-neutral-800 dark:bg-gray-700 rounded-sm focus:ring-blue-800 focus:ring-2 rounded-md"
                    v-model="field.index"
                    title="Index"
                    :disabled="selectedContract.options.moduleContract"
                />
                <label>I</label>
            </div>

            <div class="items-center flex ml-4">
                <input
                    type="checkbox"
                    class="w-3 h-3 mr-2 text-blue-600 bg-neutral-800 dark:bg-gray-700 rounded-sm focus:ring-blue-800 focus:ring-2 rounded-md"
                    v-model="field.unique"
                    title="Unique"
                    :disabled="selectedContract.options.moduleContract"
                />
                <label>U</label>
            </div>
        </div>

        <div class="flex p-1 border-l border-neutral-800" title="More">
            <button
                class="items-center justify-center flex select-none cursor-pointer mr-2 ml-2"
                @click="toggleOpened(field.propertyKey)"
            >
                <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M10.5 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z" clip-rule="evenodd"></path></svg>
            </button>
        </div>

        <div class="flex p-2 border-l border-neutral-800" title="More">
            <button
                class="items-center justify-center flex select-none mt-1 ml-1"
                :class="[selectedContract.options.moduleContract ? 'text-neutral-600 cursor-not-allowed' : 'text-red-500 cursor-pointer']"
                @click="removeField(field.propertyKey, fieldKey)"
                title="Remove Field"
            >
                <svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path>
                </svg>
            </button>
        </div>
    </div>

    <div
        class="flex-colums border-t min-h-[400px] flex-1 border-neutral-800 p-4"
        v-show="isOpened(field.propertyKey) ?? false"
    >
        <div class="flex border-b border-neutral-800 mb-2 pb-1 text-neutral-500">
            Options
        </div>

        <div class="flex-colums mb-4 pt-2">
            <div class="flex text-xs justify-center">
                <div class="w-[200px] flex items-center">Object Type: </div>
                <div class="w-[calc(100%-200px)] justify-end">
                    <input
                        class="border pl-4 h-[42px] w-full border-neutral-800 focus-none outline-none"
                        type="text"
                        placeholder="Object Type"
                        title="Object Type"
                        v-model="field.objectType"
                        :disabled="selectedContract.options.moduleContract"
                    />
                </div>
            </div>
            <div class="flex text-xs justify-center mt-2">
                <div class="w-[200px] flex items-center">Entity Type: </div>
                <div class="w-[calc(100%-200px)] justify-end">
                    <input
                        class="border pl-4 h-[42px] w-full border-neutral-800 focus-none outline-none"
                        type="text"
                        placeholder="Entity Type"
                        title="Entity Type"
                        v-model="field.entityType"
                        :disabled="selectedContract.options.moduleContract"
                    />
                </div>
            </div>
            <div class="flex text-xs justify-center mt-2">
                <div class="w-[200px] flex items-center">Model Name: </div>
                <div class="w-[calc(100%-200px)] justify-end">
                    <input
                        class="border pl-4 h-[42px] w-full border-neutral-800 focus-none outline-none"
                        type="text"
                        placeholder="Model Name"
                        title="Model Name"
                        v-model="field.modelName"
                        :disabled="selectedContract.options.moduleContract"
                    />
                </div>
            </div>
            <div class="flex text-xs justify-center mt-2">
                <div class="w-[200px] flex items-center">Resolver: </div>
                <div class="w-[calc(100%-200px)] justify-end">
                    <input
                        class="border pl-4 h-[42px] w-full border-neutral-800 focus-none outline-none"
                        type="text"
                        placeholder="Resolver"
                        title="Resolver"
                        v-model="field.resolver"
                        :disabled="selectedContract.options.moduleContract"
                    />
                </div>
            </div>
        </div>

        <div class="flex border-b border-neutral-800 mb-2 pb-1 text-neutral-500">
            Validations
        </div>

        <div class="flex-row">
            <div
                v-for="validation in field.validations"
                class=" border-b border-neutral-800"
            >
                <select
                    title="Type"
                    class="p-2 pr-4 mr-2 h-[42px] w-56 outline-none bg-neutral-900 border-none"
                    :class="[selectedContract.options.moduleContract ? 'text-neutral-500' : '']"
                    :disabled="selectedContract.options.moduleContract"
                    v-model="validation.type"
                >
                    <option
                        v-for="validationType in validationsTypes"
                        :selected="validation.type === validationType.key"
                        :value="validationType.key"
                    >{{ validationType.label }}</option>
                </select>

                <input
                    class="border-l pl-4 h-[42px] w-96 border-neutral-800 focus-none outline-none"
                    type="text"
                    placeholder="Message"
                    title="Message"
                    v-model="validation.message"
                    :disabled="selectedContract.options.moduleContract"
                />
            </div>
        </div>

        <div class="flex border-b border-neutral-800 mb-2 pb-1 mt-4 text-neutral-500">
            Schema
        </div>

        <div class="p-2 bg-neutral-800 rounded-md">
            <pre>{{ JSON.stringify(field, null, 4) }}</pre>
        </div>
    </div>
</div>
